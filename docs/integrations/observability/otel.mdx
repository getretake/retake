---
title: Open Telemetry
---

## Overview

ParadeDB provides an [unofficial OpenTelemetry (OTEL) exporter for Postgres](https://github.com/destrex271/postgresexporter) that enables ingesting telemetry data into ParadeDB from OTEL-compatible sources.

The following observability data types are supported:

- ✅ Logs
- ✅ Traces
- ❌ Metrics (in progress)

## Overview

To ship observability data to a running ParadeDB instance, include the `postgresexporter` in your OpenTelemetry Collector configuration file as follows.

```yaml
exporters:
  postgresexporter:
    username: "myoteluser"
    password: "myotelpassword"
    database: "oteldata"
    logs_table_name: "otellogs"
    traces_table_name: "oteltraces"
    port: 5432
    host: "localhost"

# -------------

service:
  pipelines:
    logs:
      receivers: [otlp]
      exporters:
        - debug
        - postgresexporter
    traces:
      receivers: [otlp]
      exporters:
        - debug
        - postgresexporter
```

<ParamField body="username" required>
  Postgres username of the ParadeDB instance to which the OpenTelemetry data will be shipped.
</ParamField>

<ParamField body="password" required>
  Postgres password of the ParadeDB instance to which the OpenTelemetry data will be shipped.
</ParamField>

<ParamField body="database" required>
  Name of the Postgres database of the ParadeDB instance to which the OpenTelemetry data will be shipped.
</ParamField>

<ParamField body="logs_table_name" required>
  Name of the Postgres table within the provided database where the OpenTelemetry logs will be stored. It must be a valid, existing table.
</ParamField>

<ParamField body="traces_table_name" required>
  Name of the Postgres table within the provided database where the OpenTelemetry traces will be stored. It must be a valid, existing table.
</ParamField>

<ParamField body="host" default="localhost" required>
  TCP/IP address on which your ParadeDB instance listens for connections from client applications.
</ParamField>

<ParamField body="port" default="5432" required>
  The PostgreSQL port that your ParadeDB instance is configured to listen for connections on.
</ParamField>


## Structure of Logs & Traces Table

By default, the OpenTelemetry tables will be created with the following schemas:

### Logs

```
    Column          |              Type              | Collation | Nullable |                 Default
--------------------+--------------------------------+-----------+----------+------------------------------------------
 Timestamp          | timestamp(6) without time zone |           | not null |
 TimestampTime      | timestamp without time zone    |           | not null | generated always as ("Timestamp") stored
 TraceId            | text                           |           |          |
 SpanId             | text                           |           |          |
 TraceFlags         | smallint                       |           |          |
 SeverityText       | text                           |           |          |
 SeverityNumber     | smallint                       |           |          |
 ServiceName        | text                           |           | not null |
 Body               | text                           |           |          |
 ResourceSchemaUrl  | text                           |           |          |
 ResourceAttributes | jsonb                          |           |          |
 ScopeSchemaUrl     | text                           |           |          |
 ScopeName          | text                           |           |          |
 ScopeVersion       | text                           |           |          |
 ScopeAttributes    | jsonb                          |           |          |
 LogAttributes      | jsonb                          |           |          |
Indexes:
    "otellogs_pkey" PRIMARY KEY, btree ("ServiceName", "TimestampTime")
```

### Traces

```
       Column       |              Type              | Collation | Nullable | Default
--------------------+--------------------------------+-----------+----------+---------
 Timestamp          | timestamp(6) without time zone |           | not null |
 TraceId            | text                           |           |          |
 SpanId             | text                           |           |          |
 ParentSpanId       | text                           |           |          |
 TraceState         | text                           |           |          |
 SpanName           | text                           |           | not null |
 SpanKind           | text                           |           |          |
 ServiceName        | text                           |           | not null |
 ResourceAttributes | jsonb                          |           |          |
 ScopeName          | text                           |           |          |
 ScopeVersion       | text                           |           |          |
 SpanAttributes     | jsonb                          |           |          |
 Duration           | bigint                         |           |          |
 StatusCode         | text                           |           |          |
 StatusMessage      | text                           |           |          |
 Events             | jsonb                          |           |          |
 Links              | jsonb                          |           |          |
Indexes:
    "oteltraces_pkey" PRIMARY KEY, btree ("ServiceName", "SpanName", "Timestamp")
```

## Examples

```sql
-- Creating BM25 index

CREATE INDEX otellogs_search_idx ON otellogs
USING bm25 (TimestampTime, ServiceName, SeverityText, Body)
WITH (key_field='TimestampTime');
```

```
-- Full text search for logs containing the keyword 'Processing'

SELECT "TimestampTime", "ServiceName", "SeverityText", "Body"
FROM otellogs
WHERE "Body" @@@ 'processing'
ORDER BY paradedb.score("TimestampTime") DESC
LIMIT 10;
```

<Accordion title="Expected output">
  ``` TimestampTime | ServiceName | SeverityText | Body
  ----------------------------+--------------+--------------+---------------------------
  2025-01-13 10:49:41.45282 | test-service | INFO | Processing batch 1
  2025-01-13 10:49:41.453161 | test-service | INFO | Starting order processing
  2025-01-13 10:49:42.11059 | test-service | INFO | Starting order processing
  2025-01-13 10:49:43.105943 | test-service | INFO | Starting order processing
  2025-01-13 10:49:44.113809 | test-service | INFO | Starting order processing
  2025-01-13 10:49:45.777648 | test-service | INFO | Processing batch 2
  2025-01-13 10:49:45.778265 | test-service | INFO | Starting order processing
  2025-01-13 10:49:46.680701 | test-service | INFO | Starting order processing
  2025-01-13 10:49:47.757439 | test-service | INFO | Starting order processing
  2025-01-13 10:49:48.5583 | test-service | INFO | Processing batch 3 (10 rows)
  ```
</Accordion>
