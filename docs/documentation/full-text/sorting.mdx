---
title: Sorting
---

## Order by Relevance

You can use the `score` column from [`paradedb.score`](/documentation/full-text/scoring) to sort results by BM25 relevance.

```sql
SELECT description, rating, category, paradedb.score(id)
FROM mock_items
WHERE description @@@ 'shoes'
ORDER BY score DESC
LIMIT 5;
```

## Order by Field

You can sort the result set by any field in `ASC` or `DESC` order. By default, Postgres orders by `ASC`.

```sql
SELECT description, rating, category
FROM mock_items
WHERE description @@@ 'shoes'
ORDER BY rating DESC
LIMIT 5;
```

## Tiebreaking

To break ties in BM25 scores, Postgres can use `ORDER BY` with multiple columns. In this query, it sorts rows with the same `score` by `rating` in descending order:

```sql
SELECT description, rating, category, paradedb.score(id)
FROM mock_items
WHERE category @@@ 'electronics'
ORDER BY score DESC, rating DESC
LIMIT 5;
```

## Fast Ordering

ParadeDB automatically pushes down `ORDER BY...LIMIT` operations on a single [text](/documentation/indexing/create_index#text-fields), [numeric](/documentation/indexing/create_index#numeric-fields), [datetime](/documentation/indexing/create_index#datetime-fields), or [boolean](/documentation/indexing/create_index#boolean-fields) field to the BM25 index if you index the `ORDER BY` field as [fast](/documentation/indexing/fast_fields). This makes these queries much faster.

You can run `EXPLAIN` on a query to check if ParadeDB pushed down an `ORDER BY...LIMIT` operation. If it did, a `Custom Scan` section with a `Sort Field` entry appears in the query plan.

```sql
-- Pushdown may not occur over very small tables
-- This forces pushdown
SET enable_indexscan = off;

EXPLAIN SELECT description
FROM mock_items
WHERE description @@@ 'shoes'
ORDER BY rating DESC
LIMIT 5;
```

<Accordion title="Expected Response">
```csv
                                                                              QUERY PLAN
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=10.00..34.03 rows=5 width=36)
   ->  Custom Scan (ParadeDB Scan) on mock_items  (cost=10.00..34.03 rows=5 width=36)
         Table: mock_items
         Index: search_idx
         Scores: false
            Sort Field: rating
            Sort Direction: desc
            Top N Limit: 5
         Tantivy Query: {"WithIndex":{"oid":2073854,"query":{"ParseWithField":{"field":"description","query_string":"shoes","lenient":null,"conjunction_mode":null}}}}
(9 rows)
```
</Accordion>

### Ordering by Text Field

If you index a fast text field with the `raw` [normalizer](/documentation/indexing/fast_fields#normalizers), ParadeDB can push down `ORDER BY <text_field> LIMIT` operations.

If you use the `lowercase` [normalizer](/documentation/indexing/fast_fields#normalizers), ParadeDB can push down `ORDER BY lower(<text_field>) LIMIT` (but not `ORDER BY <text_field> LIMIT`).

```sql
CREATE INDEX search_idx ON mock_items
USING bm25 (id, description, category)
WITH (
    key_field='id',
    text_fields='{
        "category": {"fast": true, "normalizer": "lowercase"}
    }'
);

-- category uses normalizer = lowercase, so lower(category) can be pushed down
EXPLAIN SELECT description, rating, category
FROM mock_items
WHERE description @@@ 'shoes'
ORDER BY lower(category) DESC
LIMIT 5;
```

<Accordion title="Expected Response">
```csv
                                                           QUERY PLAN
---------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=10.00..34.05 rows=5 width=584)
   ->  Custom Scan (ParadeDB Scan) on mock_items  (cost=10.00..34.05 rows=5 width=584)
         Table: mock_items
         Index: search_idx
         Scores: false
            Sort Field: category
            Sort Direction: desc
            Top N Limit: 5
         Tantivy Query: {"ParseWithField":{"field":"description","query_string":"shoes","lenient":null,"conjunction_mode":null}}
(9 rows)
```
</Accordion>

<Note>
ParadeDB does not push down all `ORDER BY` operations. It does not push down these queries:

- `ORDER BY` operations over multiple fields for tiebreaking
- `paradedb.score` with an `ORDER BY` operation over another field
- `ORDER BY` operations without `LIMIT`
</Note>
