---
title: Create Index
---

### Indexing Memory

The default Postgres `maintenance_work_mem` value of `64MB` is quite conservative and can significantly slow down index builds. For large indexes,
we strongly recommend increasing `maintenance_work_mem`. Generally speaking, this is the only setting that must be tuned to optimize index build times.
The rest have sensible defaults.

```bash postgresql.conf
maintenance_work_mem = '16GB'
```

`maintenance_work_mem` also affects the number of [segments](/documentation/concepts/index#segment) in the index. While ParadeDB tries to maintain as many segments as CPUs,
a new segment will be created if a single segment cannot fit into memory. A low `maintenance_work_mem` may lead to significantly more segments
than available CPUs, which impacts search performance.

To verify if the chosen `maintenance_work_mem` value is high enough, we recommend [inspecting](/documentation/indexing/inspect_index#index-segments) the index's segment count.

<Note>
  `maintenance_work_mem` should not exceed the server's available memory.
</Note>

### Indexing Memory per Thread

<Note>This setting requires superuser privileges.</Note>

`paradedb.create_index_memory_budget` sets the amount of memory to dedicate **per indexing thread** before the index segment needs to be
written to disk.

If unset, Postgres' `maintenance_work_mem` value is used, but is first divided by the total parallelism (`paradedb.create_index_parallelism`).
The value is measured in megabytes. A value of `1024` is the same as `1GB`.

In terms of raw indexing performance, larger is generally better.

```sql
SET paradedb.create_index_memory_budget = 1024;
```

### Indexing Threads

<Note>This setting requires superuser privileges.</Note>

`paradedb.create_index_parallelism` sets the number of threads used during `CREATE INDEX`. The default is `0`, which
automatically detects the "available parallelism" of the host computer.

For best performance it is recommended to use one less than the total number of host computer cores.

```sql
SET paradedb.create_index_parallelism = 8;
```

### Indexing Progress

ParadeDB can write indexing progress to the Postgres logs, which helps monitor the progress of a long-running `CREATE INDEX` statement.

First, Postgres logs must be enabled in `postgresql.conf` and Postgres must be restarted afterward.

```ini postgresql.conf
logging_collector = on
```

Next, set `paradedb.log_create_index_progress` to `true`. This creates Postgres `LOG:` entries every `100,000` rows with information on the indexing rate (in rows per second).

```sql
SET paradedb.log_create_index_progress = true;
```

The logs will appear in the directory specified in `log_directory`.

```sql
SHOW log_directory;
```
